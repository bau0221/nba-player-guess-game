<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NBA çƒå“¡çŒœçŒœçœ‹</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      text-align: center; 
      padding: 50px; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }
    h1 {
      font-size: 2.5em;
      margin-bottom: 30px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .teams { 
      margin-bottom: 30px; 
      font-size: 1.3em; 
      background: rgba(255, 255, 255, 0.2);
      padding: 20px;
      border-radius: 10px;
      line-height: 1.6;
    }
    .input-container {
      position: relative;
      display: inline-block;
      margin-bottom: 20px;
    }
    input { 
      padding: 12px 15px; 
      font-size: 1.1em; 
      border: none;
      border-radius: 25px;
      width: 300px;
      outline: none;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    .autocomplete-list {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    }
    .autocomplete-item {
      padding: 12px 15px;
      color: #333;
      cursor: pointer;
      border-bottom: 1px solid #eee;
      text-align: left;
    }
    .autocomplete-item:hover, .autocomplete-item.selected {
      background: #f0f0f0;
    }
    .autocomplete-item:last-child {
      border-bottom: none;
    }
    button { 
      padding: 12px 20px; 
      font-size: 1.1em; 
      margin: 0 10px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      background: #ff6b6b;
      color: white;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }
    #nextBtn {
      background: #4ecdc4;
    }
    .result { 
      margin-top: 30px; 
      font-size: 1.3em; 
      padding: 20px;
      border-radius: 10px;
      min-height: 50px;
    }
    .correct {
      background: rgba(76, 175, 80, 0.3);
      border: 2px solid #4caf50;
    }
    .incorrect {
      background: rgba(244, 67, 54, 0.3);
      border: 2px solid #f44336;
    }
    .loading {
      font-size: 1.2em;
      color: #ffd700;
    }
    .stats {
      margin-top: 20px;
      font-size: 1.1em;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ€ NBA çƒå“¡çŒœçŒœçœ‹</h1>
    <div class="loading" id="loading">æ­£åœ¨è¼‰å…¥NBAçƒå“¡è³‡æ–™...</div>
    <div id="gameContent" style="display: none;">
      <div class="teams" id="teams"></div>
      <div class="input-container">
        <input type="text" id="guessInput" placeholder="è¼¸å…¥çƒå“¡å§“å...">
        <div class="autocomplete-list" id="autocompleteList"></div>
      </div>
      <div>
        <button id="submitBtn">ğŸ¯ çŒœä¸€çŒœ</button>
        <button id="nextBtn">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
      </div>
      <div class="result" id="result"></div>
      <div class="stats" id="stats">æ­£ç¢º: 0 | éŒ¯èª¤: 0 | æº–ç¢ºç‡: 0%</div>
    </div>
  </div>

  <script>
    let allPlayers = [];
    let currentPlayer = null;
    let correctCount = 0;
    let incorrectCount = 0;
    let selectedIndex = -1;

    // åœ˜éšŠåç¨±æ˜ å°„ï¼ˆè‹±æ–‡åˆ°ä¸­æ–‡ï¼‰
    const teamTranslations = {
      'Atlanta Hawks': 'äºç‰¹è˜­å¤§è€é·¹',
      'Boston Celtics': 'æ³¢å£«é “å¡çˆ¾æå…‹',
      'Brooklyn Nets': 'å¸ƒé­¯å…‹æ—ç±ƒç¶²',
      'Charlotte Hornets': 'å¤æ´›ç‰¹é»ƒèœ‚',
      'Chicago Bulls': 'èŠåŠ å“¥å…¬ç‰›',
      'Cleveland Cavaliers': 'å…‹é‡Œå¤«è˜­é¨å£«',
      'Dallas Mavericks': 'é”æ‹‰æ–¯å°ç‰›',
      'Denver Nuggets': 'ä¸¹ä½›é‡‘å¡Š',
      'Detroit Pistons': 'åº•ç‰¹å¾‹æ´»å¡',
      'Golden State Warriors': 'é‡‘å·å‹‡å£«',
      'Houston Rockets': 'ä¼‘æ–¯é “ç«ç®­',
      'Indiana Pacers': 'å°ç¬¬å®‰ç´æºœé¦¬',
      'LA Clippers': 'æ´›æ‰ç£¯å¿«è‰‡',
      'Los Angeles Lakers': 'æ´›æ‰ç£¯æ¹–äºº',
      'Memphis Grizzlies': 'æ›¼è²æ–¯ç°ç†Š',
      'Miami Heat': 'é‚é˜¿å¯†ç†±ç«',
      'Milwaukee Bucks': 'å¯†çˆ¾ç“¦åŸºå…¬é¹¿',
      'Minnesota Timberwolves': 'æ˜å°¼è˜‡é”ç°ç‹¼',
      'New Orleans Pelicans': 'ç´å¥§è‰¯éµœé¶˜',
      'New York Knicks': 'ç´ç´„å°¼å…‹',
      'Oklahoma City Thunder': 'å¥§å…‹æ‹‰è·é¦¬é›·éœ†',
      'Orlando Magic': 'å¥§è˜­å¤šé­”è¡“',
      'Philadelphia 76ers': 'è²»åŸ76äºº',
      'Phoenix Suns': 'è²å°¼å…‹æ–¯å¤ªé™½',
      'Portland Trail Blazers': 'æ³¢ç‰¹è˜­æ‹“è’è€…',
      'Sacramento Kings': 'æ²™åŠ ç·¬åº¦åœ‹ç‹',
      'San Antonio Spurs': 'è–å®‰æ±å°¼å¥§é¦¬åˆº',
      'Toronto Raptors': 'å¤šå€«å¤šæš´é¾',
      'Utah Jazz': 'çŒ¶ä»–çˆµå£«',
      'Washington Wizards': 'è¯ç››é “å·«å¸«'
    };

    // è¼‰å…¥NBAçƒå“¡è³‡æ–™
    async function loadNBAData() {
      try {
        // æ¨¡æ“¬å¾NBA APIç²å–è³‡æ–™ï¼ˆå¯¦éš›ä¸Šæˆ‘å€‘ä½¿ç”¨ä¸€å€‹æ›´å®Œæ•´çš„çƒå“¡è³‡æ–™åº«ï¼‰
        const response = await fetch('https://api.balldontlie.io/v1/players?per_page=100');
        const data = await response.json();
        
        // ç”±æ–¼APIé™åˆ¶ï¼Œæˆ‘å€‘å…ˆç”¨ä¸€å€‹æ“´å±•çš„è³‡æ–™é›†
        allPlayers = [
          { id: 1, first_name: 'LeBron', last_name: 'James', teams: ['Cleveland Cavaliers', 'Miami Heat', 'Los Angeles Lakers'] },
          { id: 2, first_name: 'Stephen', last_name: 'Curry', teams: ['Golden State Warriors'] },
          { id: 3, first_name: 'Kevin', last_name: 'Durant', teams: ['Oklahoma City Thunder', 'Golden State Warriors', 'Brooklyn Nets', 'Phoenix Suns'] },
          { id: 4, first_name: 'Giannis', last_name: 'Antetokounmpo', teams: ['Milwaukee Bucks'] },
          { id: 5, first_name: 'Luka', last_name: 'Doncic', teams: ['Dallas Mavericks'] },
          { id: 6, first_name: 'Ja', last_name: 'Morant', teams: ['Memphis Grizzlies'] },
          { id: 7, first_name: 'James', last_name: 'Harden', teams: ['Oklahoma City Thunder', 'Houston Rockets', 'Brooklyn Nets', 'Philadelphia 76ers', 'LA Clippers'] },
          { id: 8, first_name: 'Kawhi', last_name: 'Leonard', teams: ['San Antonio Spurs', 'Toronto Raptors', 'LA Clippers'] },
          { id: 9, first_name: 'Paul', last_name: 'George', teams: ['Indiana Pacers', 'Oklahoma City Thunder', 'LA Clippers', 'Philadelphia 76ers'] },
          { id: 10, first_name: 'Damian', last_name: 'Lillard', teams: ['Portland Trail Blazers', 'Milwaukee Bucks'] },
          { id: 11, first_name: 'Anthony', last_name: 'Davis', teams: ['New Orleans Pelicans', 'Los Angeles Lakers'] },
          { id: 12, first_name: 'Kyrie', last_name: 'Irving', teams: ['Cleveland Cavaliers', 'Boston Celtics', 'Brooklyn Nets', 'Dallas Mavericks'] },
          { id: 13, first_name: 'Joel', last_name: 'Embiid', teams: ['Philadelphia 76ers'] },
          { id: 14, first_name: 'Nikola', last_name: 'Jokic', teams: ['Denver Nuggets'] },
          { id: 15, first_name: 'Jayson', last_name: 'Tatum', teams: ['Boston Celtics'] },
          { id: 16, first_name: 'Jimmy', last_name: 'Butler', teams: ['Chicago Bulls', 'Minnesota Timberwolves', 'Philadelphia 76ers', 'Miami Heat'] },
          { id: 17, first_name: 'Russell', last_name: 'Westbrook', teams: ['Oklahoma City Thunder', 'Houston Rockets', 'Washington Wizards', 'Los Angeles Lakers', 'LA Clippers'] },
          { id: 18, first_name: 'Chris', last_name: 'Paul', teams: ['New Orleans Pelicans', 'LA Clippers', 'Houston Rockets', 'Oklahoma City Thunder', 'Phoenix Suns', 'Golden State Warriors'] },
          { id: 19, first_name: 'Klay', last_name: 'Thompson', teams: ['Golden State Warriors'] },
          { id: 20, first_name: 'Draymond', last_name: 'Green', teams: ['Golden State Warriors'] },
          { id: 21, first_name: 'Donovan', last_name: 'Mitchell', teams: ['Utah Jazz', 'Cleveland Cavaliers'] },
          { id: 22, first_name: 'Trae', last_name: 'Young', teams: ['Atlanta Hawks'] },
          { id: 23, first_name: 'Zion', last_name: 'Williamson', teams: ['New Orleans Pelicans'] },
          { id: 24, first_name: 'Devin', last_name: 'Booker', teams: ['Phoenix Suns'] },
          { id: 25, first_name: 'Bradley', last_name: 'Beal', teams: ['Washington Wizards', 'Phoenix Suns'] },
          { id: 26, first_name: 'Karl-Anthony', last_name: 'Towns', teams: ['Minnesota Timberwolves', 'New York Knicks'] },
          { id: 27, first_name: 'Ben', last_name: 'Simmons', teams: ['Philadelphia 76ers', 'Brooklyn Nets'] },
          { id: 28, first_name: 'Jamal', last_name: 'Murray', teams: ['Denver Nuggets'] },
          { id: 29, first_name: 'De\'Aaron', last_name: 'Fox', teams: ['Sacramento Kings'] },
          { id: 30, first_name: 'Bam', last_name: 'Adebayo', teams: ['Miami Heat'] }
        ];
        
        document.getElementById('loading').style.display = 'none';
        document.getElementById('gameContent').style.display = 'block';
        newGame();
      } catch (error) {
        console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', error);
        document.getElementById('loading').textContent = 'è¼‰å…¥å¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†é é¢';
      }
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function newGame() {
      document.getElementById('result').textContent = '';
      document.getElementById('result').className = 'result';
      
      // éš¨æ©Ÿé¸æ“‡ä¸€å€‹çƒå“¡
      const randomIndex = Math.floor(Math.random() * allPlayers.length);
      currentPlayer = allPlayers[randomIndex];
      
      // ç¿»è­¯çƒéšŠåç¨±ä¸¦æ‰“äº‚é †åº
      const translatedTeams = currentPlayer.teams.map(team => teamTranslations[team] || team);
      shuffle(translatedTeams);
      
      document.getElementById('teams').textContent = 'é€™ä½çƒå“¡æ›¾æ•ˆåŠ›æ–¼ï¼š' + translatedTeams.join('ã€');
      document.getElementById('guessInput').value = '';
      document.getElementById('guessInput').focus();
      hideAutocomplete();
    }

    function showAutocomplete(players) {
      const list = document.getElementById('autocompleteList');
      list.innerHTML = '';
      
      if (players.length === 0) {
        list.style.display = 'none';
        return;
      }
      
      players.forEach((player, index) => {
        const item = document.createElement('div');
        item.className = 'autocomplete-item';
        item.textContent = `${player.first_name} ${player.last_name}`;
        item.addEventListener('click', () => selectPlayer(player));
        list.appendChild(item);
      });
      
      list.style.display = 'block';
      selectedIndex = -1;
    }

    function hideAutocomplete() {
      document.getElementById('autocompleteList').style.display = 'none';
      selectedIndex = -1;
    }

    function selectPlayer(player) {
      document.getElementById('guessInput').value = `${player.first_name} ${player.last_name}`;
      hideAutocomplete();
    }

    function updateStats() {
      const total = correctCount + incorrectCount;
      const accuracy = total > 0 ? Math.round((correctCount / total) * 100) : 0;
      document.getElementById('stats').textContent = `æ­£ç¢º: ${correctCount} | éŒ¯èª¤: ${incorrectCount} | æº–ç¢ºç‡: ${accuracy}%`;
    }

    // äº‹ä»¶ç›£è½å™¨
    document.getElementById('guessInput').addEventListener('input', (e) => {
      const query = e.target.value.trim().toLowerCase();
      
      if (query.length < 2) {
        hideAutocomplete();
        return;
      }
      
      const matchingPlayers = allPlayers.filter(player => {
        const fullName = `${player.first_name} ${player.last_name}`.toLowerCase();
        return fullName.includes(query) || 
               player.first_name.toLowerCase().includes(query) || 
               player.last_name.toLowerCase().includes(query);
      }).slice(0, 10);
      
      showAutocomplete(matchingPlayers);
    });

    document.getElementById('guessInput').addEventListener('keydown', (e) => {
      const items = document.querySelectorAll('.autocomplete-item');
      
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
        updateSelectedItem(items);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        selectedIndex = Math.max(selectedIndex - 1, -1);
        updateSelectedItem(items);
      } else if (e.key === 'Enter') {
        if (selectedIndex >= 0 && items[selectedIndex]) {
          e.preventDefault();
          items[selectedIndex].click();
        } else {
          checkGuess();
        }
      } else if (e.key === 'Escape') {
        hideAutocomplete();
      }
    });

    function updateSelectedItem(items) {
      items.forEach((item, index) => {
        item.classList.toggle('selected', index === selectedIndex);
      });
    }

    document.addEventListener('click', (e) => {
      if (!e.target.closest('.input-container')) {
        hideAutocomplete();
      }
    });

    function checkGuess() {
      const guess = document.getElementById('guessInput').value.trim();
      if (!guess) return;
      
      const currentFullName = `${currentPlayer.first_name} ${currentPlayer.last_name}`;
      const isCorrect = guess.toLowerCase() === currentFullName.toLowerCase();
      
      const resultEl = document.getElementById('result');
      
      if (isCorrect) {
        correctCount++;
        resultEl.textContent = `ğŸ‰ æ­å–œä½ ï¼Œç­”å°äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentFullName}`;
        resultEl.className = 'result correct';
      } else {
        incorrectCount++;
        resultEl.textContent = `âŒ çŒœéŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${currentFullName}`;
        resultEl.className = 'result incorrect';
      }
      
      updateStats();
      hideAutocomplete();
    }

    document.getElementById('submitBtn').addEventListener('click', checkGuess);
    document.getElementById('nextBtn').addEventListener('click', newGame);

    // å•Ÿå‹•éŠæˆ²
    loadNBAData();
  </script>
</body>
</html>
